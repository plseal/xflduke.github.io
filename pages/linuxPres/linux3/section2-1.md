## ユーザとグループの管理



### ユーザ情報

- `/etc/passwd` に管理している
  - 書式：`user:x:1000:1002:comment:/home/user:/bin/bash`
    - `user`：アカウント名
    - `x`：パスワード位、実際の保持場所→`/etc/shadow`
    - `1000`：UID、ユーザを識別のID
      - rootユーザは必ず０、０〜９９は一般的にシステム管理アカウントで利用
      - 一般的に普通のユーザは１０００からスタート



    - `1000`：GID、ユーザのプライムグループを識別のID
    - `comment`：なんでもいい、メモ情報
    - `/home/user`：ホームディレクトリ
    - `/bin/bash`：ユーザがログインしたり新たにシェルを開いた際に起動されるシェルの絶対パス
    - ※実パスワード所在の`/etc/shadow`はrootしか読み出せない



### グループ情報

- `/etc/group`ファイルに管理している
  - 書式：`groupName:x:1002:groupMembers`
  - `x`：パスワード位、実際の保持場所→`/etc/gshadow`
    - 設定されたら、グループ外のユーザをこのグループへ切替（newgrp）の際にパスワードが必要



### コマンド

- `useradd [-c コメント][-d ホームディレクトリパス][-g GID][-u UID][-s シェルパス]`
  - GIDを指定しないと、自動的に同名のグループを作成（userdelも同じ）
- `usermod [オプション][-L ロック対象ユーザ][-U アンロック対象ユーザ]`
- `userdel [-r]`：`-r`はホームディレクトリも削除
- `passwd [-l][-u] ユーザ`：パスワード「ロック」「アンロック」「変更」



- `groupadd グループ名`
- `groupmod [-g 新GID][-n 新グループ名] グループ名`
- `groupdel グループ名`
- `gpasswd [-a][-d][-A] アカウント名 グループ名`：ユーザをグループに`[追加][削除][プライム指定]`



- `chage [-i] アカウント`：アカウントパラメータ表示や変更
- `id [-g][-G][-n][-r][-u]`：ユーザ情報表示`[プライムGID][所在GIDs][名前表示][実際ID][アカウントID]`
- `whoami`：現在アカウント名前を表示
- `groups アカウント名`：=`id -gn アカウント名`
- `newgrp グループ名`：指定グループをプライムへ一時切替、新たなbashプロセスが作成、終了まで維持



- 管理者権限を実行できるsudoersについて
  - `/etc/sudoers`で管理している
  - `visudo`で直接編集する



# 権限について

- ユーザ、グループ、パスワード、権限
- 7777
